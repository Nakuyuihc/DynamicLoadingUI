webpackJsonp([21],{"8CyG":function(t,e,n){t.exports=n.p+"static/img/my_img_promotion2@2x.b7ed421.png"},BQC9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{mobile:"",smscode:"",shareId:"",count:0,isSend:!1,checkKey:"",joinInfo:{},openId:""}},created:function(){this.getopenId(),this.getInviteJoinInfo()},methods:{getShareId:function(){this.shareId=this.$route.query.shareBy},getSmsCode:function(){var t=this,e={a:1,type:9,mobile:this.mobile};this.$Api.SMSCode(e).then(function(e){0==e.q.s?(t.$toast("发送成功!"),t.checkKey=e.q.checkKey):t.$toast(e.q.d)})},getCode:function(){if(11==this.mobile.length){if(this.count>0)return;this.count=10,this.isSend=!0,this.countDown(),this.getSmsCode()}else this.$toast("请输入正确手机号")},countDown:function(){var t=this,e=setInterval(function(){t.count--,t.count<=0&&(t.count=0,t.isSend=!1,clearInterval(e))},1e3)},submitCode:function(){var t=this,e={a:2,type:9,mobile:this.mobile,checkKey:this.checkKey,code:this.smscode};this.$Api.SMSCode(e).then(function(e){0==e.q.s?t.getUserBindingSubmit():t.$toast("手机验证码出错")})},getUserBindingSubmit:function(){var t=this,e={a:1,mobile:this.mobile,checkKey:this.checkKey,partner:17,openId:this.openId,rewardType:this.joinInfo.rewardType,rewardRefId:this.joinInfo.rewardRefId,shareBy:this.$route.query.shareBy};this.$Api.AcceptInviteSubmit(e).then(function(e){0==e.q.s?t.$popup({content:"绑定手机成功",showCancel:!1}).then(function(e){"sure"==e&&t.$router.replace({name:"Index"})}):1104==e.q.s?t.$popup({content:"手机已绑定",showCancel:!1}).then(function(t){}):t.$toast(e.q.d)})},finish:function(){this.submitCode()},getInviteJoinInfo:function(){var t=this,e=this.$route.query.shareBy;this.$Api.getInviteJoinInfo(e).then(function(e){console.log(e),0==e.q.s&&(t.joinInfo=e.q)})},getopenId:function(){var t=location.search,e=new Object;if(-1!=t.indexOf("?"))for(var n=t.substr(1).split("&"),i=0;i<n.length;i++)e[n[i].split("=")[0]]=unescape(n[i].split("=")[1]);this.openId=e.code}},components:{}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"promote-Phone"}},[t._m(0),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"input-wrap"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],attrs:{type:"tel",maxlength:"11",placeholder:"请输入手机号码"},domProps:{value:t.mobile},on:{input:function(e){e.target.composing||(t.mobile=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"input-wrap"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.smscode,expression:"smscode"}],attrs:{type:"text",maxlength:"6",placeholder:"验证码"},domProps:{value:t.smscode},on:{input:function(e){e.target.composing||(t.smscode=e.target.value)}}}),n("span",{staticClass:"send-code",class:{"c-999":t.count>0},on:{click:t.getCode}},[t._v(t._s(t.count>0?"("+t.count+"s)":"获取验证码"))])]),t._v(" "),n("div",{staticClass:"btn",on:{click:t.finish}},[t._v("立即加入")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("img",{staticClass:"bg-img",attrs:{src:n("8CyG")}})])}]},s=n("VU/8")(i,o,!1,function(t){n("igKu")},null,null);e.default=s.exports},igKu:function(t,e){}});
//# sourceMappingURL=21.7c8b4c1a1bd6bbd371eb.js.map