webpackJsonp([38],{"1XSb":function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a("Gu7T"),e=a.n(s),n=a("i2Wk"),o=a("ymRw"),c={data:function(){return{isLoading:!0,loadingText:!1,isEmpty:!1,tabIndex:1,comments:[],starType:0,imageType:0,pa:1,li:10,ob:1,ot:1,goodStat:0,total:0,midStat:0,badStat:0,setImageStat:0}},created:function(){this.getCommentList(),this.getCommentStatInfo()},methods:{changeRang:function(t){this.tabIndex=t,this.pa=1,this.starType=t-1,this.imageType=0,this.isLoading=!0,this.comments=[],5==t&&(this.starType=0,this.imageType=1),this.getCommentList()},preview:function(t,i){var a=[];t.forEach(function(t){a.push(t.imagePath)}),Object(o.ImagePreview)(a,i),console.log(i)},loadMore:function(){this.isLoading||(this.isLoading=!0,this.pa+=1,this.getCommentList())},getCommentStatInfo:function(){var t=this,i=this.$route.params.id;this.$Api.getCommentStatInfo(0,i).then(function(i){console.log(i),0==i.q.s&&(t.goodStat=i.q.goodStat,t.total=i.q.total,t.midStat=i.q.midStat,t.badStat=i.q.badStat,t.setImageStat=i.q.setImageStat)})},getCommentList:function(){var t=this,i=this.$route.params.id,a=this.starType,s=this.imageType,n={pa:this.pa,li:this.li,ob:this.ob,ot:this.ot};this.loadingText=!0,this.$Api.getCommentList(i,a,s,n).then(function(i){if(0==i.q.s){t.loadingText=!1;var a=t.comments;a.push.apply(a,e()(i.q.comments)),t.comments=a,i.q.total>t.pa*t.li?t.isLoading=!1:t.isLoading=!0}})}},components:{CommonHeader:n.a}},l={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{attrs:{id:"comment"}},[a("common-header",{attrs:{title:"用户评价"}}),t._v(" "),a("div",{staticClass:"header"},[a("div",{class:{active:1==t.tabIndex},on:{click:function(i){t.changeRang(1)}}},[a("div",[t._v("全部评价")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.total))])]),t._v(" "),a("div",{class:{active:2==t.tabIndex},on:{click:function(i){t.changeRang(2)}}},[a("div",[t._v("好评")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.goodStat))])]),t._v(" "),a("div",{class:{active:3==t.tabIndex},on:{click:function(i){t.changeRang(3)}}},[a("div",[t._v("中评")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.midStat))])]),t._v(" "),a("div",{class:{active:4==t.tabIndex},on:{click:function(i){t.changeRang(4)}}},[a("div",[t._v("差评")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.badStat))])]),t._v(" "),a("div",{class:{active:5==t.tabIndex},on:{click:function(i){t.changeRang(5)}}},[a("div",[t._v("晒图")]),t._v(" "),a("div",{staticClass:"num"},[t._v(t._s(t.setImageStat))])])]),t._v(" "),t.comments.length>0?[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"comment-list",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},t._l(t.comments,function(i,s){return a("div",{staticClass:"list-wrap"},[a("div",{staticClass:"list-item clearfix"},[a("div",{staticClass:"item-img fl-left"},[a("img",{attrs:{src:i.facePath,alt:""}})]),t._v(" "),a("div",{staticClass:"item-info fl-left"},[a("h4",{staticClass:"text-over"},[t._v(t._s(i.name))]),t._v(" "),a("p",[t._v(t._s(i.comTime))]),t._v(" "),a("div",{staticClass:"start_sel"},[a("div",{staticClass:"star",class:"star-"+parseInt(i.starNum)})])])]),t._v(" "),a("p",{staticClass:"comment-desc"},[t._v(t._s(i.content))]),t._v(" "),i.images.length>0?a("div",{staticClass:"comment-imgs clearfix"},t._l(i.images,function(s,e){return a("img",{staticClass:"img-item",attrs:{src:s.imagePath,alt:""},on:{click:function(a){t.preview(i.images,e)}}})})):t._e()])}))]:[a("div",{staticClass:"remind-text"},[t._v("\n        "+t._s(t.loadingText?"加载中...":"暂无相关数据")+"\n      ")])]],2)},staticRenderFns:[]},m=a("VU/8")(c,l,!1,function(t){a("VJLU")},null,null);i.default=m.exports},Gu7T:function(t,i,a){"use strict";i.__esModule=!0;var s=function(t){return t&&t.__esModule?t:{default:t}}(a("c/Tr"));i.default=function(t){if(Array.isArray(t)){for(var i=0,a=Array(t.length);i<t.length;i++)a[i]=t[i];return a}return(0,s.default)(t)}},VJLU:function(t,i){}});
//# sourceMappingURL=38.fa37d591a0a66de8d690.js.map