webpackJsonp([55],{"/bx+":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("VO0z"),n=s("i2Wk"),o=s("C5nv"),a=s("R4e6"),r={data:function(){return{textNum:0,showOrderType:!1,returnReason:"请选择退货原因",isSelected:!1,value:1,choosed:!1,tips:"未选择",giftObj:"",textContent:"",shareInfo:{},imgIdList:[]}},components:{BottomPopup:i.a,CommonHeader:n.a,Cell:o.a,UploadImg:a.a},created:function(){if(this.$route.query.giftObj){var t=JSON.parse(this.$route.query.giftObj);console.log(t),t&&(this.giftObj=t,this.choosed=!0,this.tips="已选择")}},methods:{getTextarea:function(){var t=this.$refs.textArea.value.length;this.textNum=t},showOT:function(){this.showOrderType=!0},getBottomPopup:function(t){console.log(t),"cancel"!=t&&(this.returnReason=t.text,this.isSelected=!0),this.showOrderType=!1},submitApplication:function(){this.choosed&&(this.getGiftSubmit(),this.$popup({content:"请点击右上角进行分享",showCancel:!1}).then(function(t){console.log(t)}))},selectGift:function(){this.$router.replace({name:"SendGiftList"})},valueChange:function(t){this.value+=t},getIds:function(t){console.log(t),this.imgIdList=t},getGiftSubmit:function(){var t=this,e="";this.imgIdList&&this.imgIdList.length>0&&(e=this.imgIdList.join(","));var s={a:4,targetId:0,content:this.textContent,gifts:[{storeId:this.giftObj.storeId,num:this.giftObj.num}],imageIds:e};this.$Api.getGiftSubmit(s).then(function(e){console.log(e),0==e.q.s&&(t.shareInfo=e.q.shareInfo,t.initShare())})},initShare:function(){var t=this;console.log("https://"+location.hostname+this.shareInfo.shareUrl+"&type="+this.$route.query.type);var e={title:this.shareInfo.shareTitle,desc:this.shareInfo.shareText,link:"https://"+location.hostname+this.shareInfo.shareUrl+"&type="+this.$route.query.type+"&fromShare=1",imgurl:this.shareInfo.iconPath};this.$wechat.iniShare(e,function(){setTimeout(function(){t.$router.replace({name:"SendGiftList"})},1e3)})}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"send-gift"}},[s("common-header",{attrs:{title:"送礼物"}}),t._v(" "),s("div",{staticStyle:{"border-bottom":"1px solid #eee"}},[s("Cell",{attrs:{title:"选择礼物",value:t.tips},on:{click:t.selectGift}})],1),t._v(" "),t.choosed?s("div",{staticClass:"list-wrap"},[s("div",{staticClass:"list-item"},[s("div",{staticClass:"good-img"},[s("img",{staticClass:"goods-img",attrs:{src:t.giftObj.imagePath,alt:""}})]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"goods-name"},[t._v(t._s(t.giftObj.name))]),t._v(" "),s("div",{staticClass:"goods-norms"},[t._v(t._s(t.giftObj.spec)+" "+t._s(t.giftObj.size))]),t._v(" "),s("div",{staticClass:"goods-prices"},[s("span",{staticClass:"price"},[s("em",{staticClass:"price-icon"},[t._v("￥")]),t._v(t._s(t.giftObj.price))]),t._v(" "),s("span",{staticClass:"num fl-right"},[s("em",[t._v("x")]),t._v(t._s(t.giftObj.num))])])])])]):t._e(),t._v(" "),s("div",{staticClass:"refund"},[s("div",{staticClass:"title"},[t._v("\n\t\t\t\t赠礼祝福\n\t\t\t")]),t._v(" "),s("div",{staticClass:"refund-text"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textContent,expression:"textContent"}],ref:"textArea",attrs:{name:"refund",placeholder:"给朋友送个祝福吧~",maxlength:"200"},domProps:{value:t.textContent},on:{input:[function(e){e.target.composing||(t.textContent=e.target.value)},t.getTextarea]}}),t._v(" "),s("span",[t._v(t._s(t.textNum)+"/200")])])]),t._v(" "),s("div",{staticClass:"uploadImg"},[s("UploadImg",{attrs:{maxImgNum:3},on:{getIds:t.getIds}})],1),t._v(" "),s("div",{staticClass:"submit-btn",class:{active:t.choosed},on:{click:t.submitApplication}},[t._v("送给好友")])],1)},staticRenderFns:[]},l=s("VU/8")(r,c,!1,function(t){s("aAZk")},null,null);e.default=l.exports},aAZk:function(t,e){}});
//# sourceMappingURL=55.3ff14fa3ce12693b574a.js.map