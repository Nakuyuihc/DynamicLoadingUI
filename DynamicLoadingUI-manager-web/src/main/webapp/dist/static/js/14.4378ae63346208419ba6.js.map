{"version":3,"sources":["webpack:///./node_modules/babel-runtime/core-js/get-iterator.js","webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js","webpack:///src/pages/Customized/Confirm.vue","webpack:///./src/pages/Customized/Confirm.vue?5fb3","webpack:///./src/pages/Customized/Confirm.vue"],"names":["module","exports","default","__webpack_require__","__esModule","anObject","get","getIterator","it","iterFn","TypeError","call","action","type","BottomPopup","toString","_iteratorNormalCompletion","_step","value","totalPrice","_iteratorNormalCompletion2","_step2","couponPrice","initOrderType","initInput","newGetsubmit","initAddress","orgId","skuId","spuId","num","id","params","d","_this","this","orgName","name","price","imagePath","packPrice","discountPrice","shopPrices","orderType","_this2","confirmAddress","res","addresses","item","_this3","input","inputs","arr","text","_this4","orderList","index","buyNum","promId","customId","storeId","goodObj","goods","shopObj","shops","goodsAmount","realAmount","reductionAmount","orderId","clearStorage","_params","setInputValue","Customized_Confirm","render","_vm","_h","$createElement","_c","_self","attrs","title","_v","staticClass","on","click","showOT","directives","rawName","expression","src","_e","showType","$event","linkTo","_s","getMobile","regionInfo","region","street","_l","alt","staticStyle","font-size","ref","refInFor","placeholder","domProps","border","margin-right","color","margin-bottom","linkToCashier","itemList","selItem","getBottomPopup","staticRenderFns","Component","normalizeComponent","Confirm","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/14.4378ae63346208419ba6.js","sourcesContent":["module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/get-iterator.js\n// module id = BO1k\n// module chunks = 14 15","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/get-iterator.js\n// module id = fxRn\n// module chunks = 14 15","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator.js\n// module id = g8Ux\n// module chunks = 14 15","<template>\r\n  <div id=\"confirm-order\">\r\n  \t<common-header :title=\"'确认定制'\"></common-header>\r\n  \t\r\n    <div class=\"cell bg-fff\" @click=\"showOT\" v-if=\"showType\">\r\n      赠礼类型\r\n      <span class=\"fl-right\" v-show=\"orderType===1\">存入礼物包</span>\r\n      <span class=\"fl-right\" v-show=\"orderType===0\">实物发货</span>\r\n      <img src=\"../../assets/arrow_gray.png\" class=\"arrow_gray\">\r\n    </div>\r\n    \r\n    <!--送给好友进来-->\r\n    <div class=\"cell bg-fff\"  v-if=\"!showType\">赠礼类型\r\n      <span class=\"fl-right\" v-show=\"orderType===1\">存入礼物包</span>\r\n    </div>\r\n    \r\n    <div class=\"order-address bg-fff\" v-show=\"orderType===0\" @click=\"linkTo('ConfirmAddress')\">\r\n      <div class=\"address-info\">\r\n      \t<template v-if=\"confirmAddress\">\r\n\t        <div class=\"name-phone clearfix\">\r\n\t          <span class=\"fl-left\">收货人：{{confirmAddress.name}}</span>\r\n\t          <span class=\"fl-right\">{{getMobile}}</span>\r\n\t        </div>\r\n\t        <div class=\"address-detail\">\r\n\t          {{confirmAddress.regionInfo[0].region.name}}{{confirmAddress.regionInfo[1].region.name}}{{confirmAddress.regionInfo[2].region.name}}{{confirmAddress.street}}\r\n\t        </div>\r\n\t        <img src=\"../../assets/arrow_gray.png\" class=\"arrow_gray\">\r\n      \t</template>\r\n      \t<template v-else>未选择</template>\r\n      </div>\r\n      <img src=\"../../assets/cart/address_bor.png\" class=\"address-bor\">\r\n    </div>\r\n    <!--订单详情-->\r\n    <div class=\"order-detail\">\r\n      <!--列表项-->\r\n      <div class=\"detail-shop bg-fff\" v-for=\"(item,index) in orderList\">\r\n        <div class=\"cell text-over\">{{item.orgName}}</div>\r\n        <div class=\"good-list\">\r\n          <div class=\"list-item clearfix\" v-for=\"(goods,index) in item.cartInfos\">\r\n            <div class=\"item-img fl-left\">\r\n              <img :src=\"goods.imagePath\" alt=\"\">\r\n            </div>\r\n            <div class=\"item-info fl-left\">\r\n              <div class=\"title\">{{goods.name}}</div>\r\n              <!-- <div>{{goods.productSize}} <span v-if=\"goods.packing\">({{goods.packing.name}})</span></div> -->\r\n              <div class=\"goods-prices\">\r\n\t              <!-- <div class=\"packprice\" v-if=\"goods.packPrice > 0\">包装费：￥{{goods.packPrice}}</div> -->\r\n              \t<span class=\"price\"><em style=\"font-size: 0.32rem\">￥</em>{{goods.discountPrice}}</span>\r\n              \t<span class=\"item-count fl-right\">x{{goods.buyNum}}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"cell bg-fff\" @click=\"linkTo('ConfirmCoupon')\">\r\n            <span>优惠券</span>\r\n            <span class=\"span-tag\">0张可用</span>\r\n            <span class=\"fl-right\" v-if=\"false\"><em style=\"color: #999\">-</em>￥100.0</span>\r\n            <span class=\"fl-right\" v-else>未选择</span>\r\n            <img src=\"../../assets/arrow_gray.png\" class=\"arrow_gray\">\r\n          </div>\r\n          <div class=\"cell bg-fff\">\r\n            买家留言\r\n            <input type=\"text\" placeholder=\"选填\" class=\"order-msg fl-right\" ref='input' @input=\"setInputValue\" :value=\"inputs[index]\">\r\n          </div>\r\n          <div class=\"cell bg-fff\" style=\"border: none\">\r\n            <span class=\"fl-right\" style=\"margin-right:0;\">合计： <em style=\"color: #fe4436;\">￥{{shopPrices[index]}}</em></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"detail-shop order-price bg-fff\">\r\n      <div style=\"margin-bottom: 0.32rem\">总金额<span class=\"fl-right\" style=\"color: #fe4436;\">{{shopPrices[0]}}</span></div>\r\n      <div>优惠券<span class=\"fl-right\" style=\"color: #fe4436;\"> -￥{{reductionAmount}}</span></div>\r\n    </div>\r\n    <div class=\"footer\">\r\n      <div class=\"fl-right\">\r\n        <span class=\"total-price\">实付款：</span>\r\n        <span class=\"price\">￥{{shopPrices[0]}}</span>\r\n        <span class=\"goods-account\" @click=\"linkToCashier\">提交订单</span>\r\n      </div>\r\n    </div>\r\n    <!-- 底部弹窗 -->\r\n    <div class=\"shadow\" v-if=\"showOrderType\">\r\n      <BottomPopup :itemList=\"itemList\" @selItem=\"getBottomPopup\"></BottomPopup>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import BottomPopup from '../../components/Popup/BottomPopup'\r\n\t\r\n  export default {\r\n    data () {\r\n      return {\r\n        itemList: [\r\n          {\r\n            text: '存入礼物包',\r\n            id: 1\r\n          },\r\n          {\r\n            text: '实物发货',\r\n            id: 0\r\n          }\r\n        ],\r\n        showType:true,\r\n        showOrderType: false,\r\n        orderType: 1,\r\n        orderList:[],\r\n        shopPrices:[],\r\n        couponPrices:[],\r\n        inputs:[],\r\n        payment:0,\r\n        confirmAddress:'',\r\n        goodsAmount:0,\r\n        reductionAmount:0,\r\n        realAmount:0,\r\n        orderId:'',\r\n        action:this.$route.query.action,\r\n        type:this.$route.query.type,\r\n      }\r\n    },\r\n    watch: {},\r\n    components: {\r\n      BottomPopup\r\n    },\r\n    computed:{\r\n    \tgetMobile(){\r\n    \t\tif(this.confirmAddress){\r\n    \t\t\tlet phone = this.confirmAddress.mobile.toString()\r\n    \t\t\tlet mobile = phone.substring(0,3) + '****' + phone.substring(7,11)\r\n    \t\t\treturn mobile\r\n    \t\t}\r\n    \t},\r\n    \t//总金额\r\n    \ttotalPrices(){\r\n    \t\tlet totalPrice = 0\r\n    \t\tfor(let item of this.shopPrices){\r\n    \t\t\ttotalPrice += item\r\n    \t\t}\r\n    \t\treturn totalPrice\r\n    \t},\r\n    \t//优惠券\r\n    \ttotalCoupon(){\r\n    \t\tlet couponPrice = 0\r\n    \t\tfor(let item of this.couponPrices){\r\n    \t\t\tcouponPrice += item\r\n    \t\t}\r\n    \t\treturn couponPrice\r\n    \t},\r\n    },\r\n    created(){\r\n    \tthis.initOrderType()\r\n    \tthis.initOrderList()\r\n//  \tthis.initAddress()\r\n    \tthis.initInput()\r\n    \t\r\n      this.getOrderSubmit(2,1)//购物车算价格\r\n\r\n      this.newGetsubmit()\r\n    },\r\n    mounted(){\r\n    \tthis.initAddress()\r\n    },\r\n    methods: {\r\n      newGetsubmit(){\r\n          let goods = JSON.parse(localStorage.getItem(\"goods\"));\r\n          let goodsImmediately = JSON.parse(localStorage.getItem(\"goodsImmediately\"));\r\n          // console.log(goods, goodsImmediately);\r\n\r\n          let params = {\r\n            a: 1,\r\n            type: 5,\r\n            sendType: 0,\r\n            // recieverId: 0,\r\n            addresId: 0,\r\n            shops: [\r\n              {\r\n                orgId: goods.orgSummery.orgId,\r\n                note: \"\",\r\n                coupons: \"\",\r\n                goodsList:[\r\n                   {\r\n                  skuId: goods.skuId,\r\n                  spuId: goods.spuId,\r\n                  num:parseInt(this.$route.query.num) ,\r\n                  promId: 0,\r\n                  customId:parseInt(this.$route.query.id) ,\r\n                  storeId: 0,\r\n                  packingId: 0\r\n                }\r\n                ]\r\n              }\r\n            ]\r\n          };\r\n          console.log( params)\r\n          this.$Api.getOrderSubmit1(params).then(res=>{\r\n            console.log(res.q.d);\r\n\r\n          });\r\n      },\r\n      showOT(){\r\n        this.showOrderType = true\r\n      },\r\n      initOrderList(){\r\n      \t// let giftObj = JSON.parse( localStorage.getItem('giftObj') ) \r\n      \t// if(giftObj && this.$route.query.action == 3){\r\n      \t// \tthis.showType = false\r\n        //   this.orderType = 1\r\n      \t// \tthis.orderList = giftObj.shop\r\n      \t// }else{\r\n\t      // \tlet str = localStorage.getItem('orderList')\r\n\t\t    // \tlet orderList = JSON.parse(str)\r\n\t\t    // \tconsole.log(orderList)\r\n\t\t    // \tthis.orderList = orderList\r\n        // }\r\n        // this.orderList = [{\"orgId\":0,\"orgName\":\"礼物飞自营\",\"directSale\":1,\"total\":2,\"goodFreeShipping\":0,\"cartInfos\":[{\"id\":118,\"spuId\":150,\"skuId\":139,\"customId\":0,\"promId\":0,\"packing\":{\"id\":88,\"name\":\"大幅度\",\"price\":2,\"packingUnit\":2},\"name\":\"测试专用\",\"productSize\":\"黑色\",\"buyNum\":1,\"originalPrice\":100,\"discountPrice\":90,\"packPrice\":2,\"imagePath\":\"http://opengiftfly-1255652370.file.myqcloud.com/img/201803/02/105924_7659.jpg\",\"inventory\":2992,\"isInvalid\":0,\"commentId\":0,\"isChecked\":true}],\"isChecked\":false}]\r\n        let goods = JSON.parse(localStorage.getItem('goods'))\r\n        let item = JSON.parse(localStorage.getItem('item'))\r\n        let list = JSON.parse(localStorage.getItem('List'))\r\n\r\n        this.orderList = [{\r\n  orgId: goods.orgSummery.orgId,\r\n  orgName: goods.orgSummery.orgName,\r\n  directSale: 1,\r\n  total: 2,\r\n  goodFreeShipping: 0,\r\n  cartInfos: [{\r\n    id: 0,\r\n    spuId: goods.spuId,\r\n    skuId: goods.skuId,\r\n    customId: this.$route.query.id,\r\n    promId: 0,\r\n    packing: {\r\n      id: 88,\r\n      name: \"大幅度\",\r\n      price: 2,\r\n      packingUnit: 2\r\n    },\r\n    name: goods.name,\r\n    productSize: \"\",\r\n    buyNum: this.$route.query.num,\r\n    originalPrice: 100,\r\n    discountPrice: item.price,\r\n    packPrice: 0,\r\n    imagePath: list[0].image.imagePath,\r\n    inventory: 2992,\r\n    isInvalid: 0,\r\n    commentId: 0,\r\n    isChecked: true\r\n  }],\r\n  isChecked: false\r\n}]\r\n\r\n\t    \t\r\n\t    \t//计算总价\r\n\t    \tthis.orderList.forEach((res)=>{\r\n\t    \t\tlet shopPrices = 0\r\n\t    \t\tres.cartInfos.forEach((val)=>{\r\n\t    \t\t\tif(val.packPrice && val.packPrice > 0){\r\n\t    \t\t\t\tshopPrices += val.buyNum * val.discountPrice + val.packPrice\r\n\t    \t\t\t}else{\r\n\t    \t\t\t\tshopPrices += val.buyNum * val.discountPrice\r\n\t    \t\t\t}\r\n\t    \t\t})\r\n\t    \t\tthis.shopPrices.push(shopPrices)\r\n\t    \t})\r\n      },\r\n      \r\n      initOrderType(){\r\n      \tif(localStorage.getItem('orderType')){\r\n      \t\tlet orderType = localStorage.getItem('orderType')\r\n      \t\tthis.orderType = parseInt(orderType) \r\n      \t}\r\n      },\r\n      \r\n      initAddress(){\r\n      \t//判断是否已经选择\r\n      \tif(localStorage.getItem('confirmAddress')){\r\n      \t\tlet confirmAddress = JSON.parse(localStorage.getItem('confirmAddress'))\r\n      \t\tthis.confirmAddress = confirmAddress\r\n      \t\tconsole.log(confirmAddress)\r\n      \t}else{\r\n\t\t\t\t\t//获取默认地址\r\n\t\t\t\t\tthis.$Api.getShippingAddressList().then((res)=>{\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif(res.q.s == 0){\r\n\t\t\t\t\t\t\tif(res.q.total > 0){\r\n\t\t\t\t\t\t\t\tlet addresses = res.q.addresses\r\n\t\t\t\t\t\t\t\taddresses.forEach((item)=>{\r\n\t\t\t\t\t\t\t\t\tif(item.selected == 1){\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(item)\r\n\t\t\t\t\t\t\t\t\t\tthis.confirmAddress = item\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n      \t}\r\n      },\r\n      initInput(){\r\n      \tif(localStorage.getItem('inputs')){\r\n      \t\tthis.inputs = JSON.parse( localStorage.getItem('inputs') )\r\n      \t}\r\n      },\r\n      \r\n      setInputValue(){\r\n      \tlet inputs = this.$refs.input\r\n      \tthis.inputs = []\r\n      \tinputs.forEach((item)=>{\r\n      \t\tthis.inputs.push(item.value)\r\n      \t})\r\n      \tlet arr = JSON.stringify(this.inputs)\r\n      \tlocalStorage.setItem('inputs',arr)\r\n      },\r\n      \r\n      //清除缓存\r\n      clearStorage(){\r\n      \tlocalStorage.removeItem('orderType')\r\n      \tlocalStorage.removeItem('orderList')\r\n      \tlocalStorage.removeItem('confirmAddress')\r\n      \tlocalStorage.removeItem('inputs')\r\n      \tlocalStorage.removeItem('giftObj')\r\n      },\r\n      \r\n      getBottomPopup(item){\r\n        localStorage.removeItem('orderType')\r\n        if(item != 'cancel'){\r\n          this.orderTypeText = item.text;\r\n          this.orderType = item.id;\r\n          localStorage.setItem('orderType',item.id)\r\n        }\r\n        this.showOrderType = false\r\n      },\r\n      \r\n      getOrderSubmit(action,type){\r\n      \tlet orderList = this.orderList\r\n      \tlet shops = []\r\n\t\t\t\torderList.forEach((item,index)=>{\r\n\t\t\t\t\tlet goods = []\r\n      \t\tlet shopObj = {}\r\n\t\t\t\t\tshopObj.orgId = item.orgId\r\n      \t\tshopObj.note  = this.inputs[index]\r\n      \t\tshopObj.coupons = ''\r\n\t\t\t\t\titem.cartInfos.forEach((item,index)=>{\r\n      \t\t\tlet goodObj = {}\r\n\t\t\t\t\t\tgoodObj.skuId = item.skuId\r\n\t      \t\tgoodObj.spuId = item.spuId\r\n\t      \t\tgoodObj.num = item.buyNum\r\n\t      \t\tgoodObj.promId  = item.promId\r\n\t      \t\tgoodObj.customId = item.customId\r\n\t      \t\tgoodObj.packingId = item.packing.id\r\n\t      \t\tgoodObj.storeId = item.storeId\r\n\t      \t\tgoods.push(goodObj)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tshopObj.goodsList = goods\r\n      \t\tshops.push(shopObj)\r\n\t\t\t\t})\r\n      \tconsole.log(shops)\r\n      \t\r\n      \tlet params = {\r\n      \t\ta:action,\r\n      \t\tt:type,\r\n      \t\tsendType:this.orderType,\r\n//    \t\taddresId:this.confirmAddress.id?this.confirmAddress.id:'0',\r\n      \t\taddresId:this.orderType == '1'? '0':this.confirmAddress.id,\r\n      \t\tshops:shops,\r\n      \t}\r\n      \tconsole.log(params)\r\n      \tthis.$Api.getOrderSubmit(params).then((res)=>{\r\n//    \t\tconsole.log(res)\r\n\t\t\t\t\tif(res.q.s == 0){\r\n\t\t\t\t\t\tthis.goodsAmount = res.q.goodsAmount\r\n\t\t\t\t\t\tthis.realAmount = res.q.realAmount\r\n\t\t\t\t\t\tthis.reductionAmount = res.q.reductionAmount\r\n\t\t\t\t\t\tthis.orderId = res.q.orderId\r\n\r\n\t\t\t\t\t\tif(params.a == 1 || params.a == 3){\r\n\t\t\t\t\t\t\t//判断是否在微信\r\n\t\t\t\t    \tthis.clearStorage()\r\n\t\t\t\t\t\t\tif(this.$call.testType().wechat){\r\n\t\t\t\t\t      this.$router.replace({name: 'Cashier',query:{orderId:this.orderId,realAmount:this.realAmount}})\r\n      \t\t\t\t}else{\r\n      \t\t\t\t\tlet params = {\r\n\t      \t\t\t\t\taction:0,\r\n\t      \t\t\t\t\tamount:this.realAmount,\r\n\t      \t\t\t\t\torderId : this.orderId\r\n\t      \t\t\t\t}\r\n      \t\t\t\t\tcheckOutCounter(params)\r\n      \t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.$toast(res.q.d)\r\n\t\t\t\t\t}\r\n      \t})\r\n      },\r\n      linkToCashier(){\r\n      \tlet action = this.action\r\n\t\t\t\tlet type = this.type\r\n      \t//实物发货\r\n\t\t\t\tif(this.orderType == 0){\r\n    \t\t\tif(this.confirmAddress.id){\r\n    \t\t\t\tthis.getOrderSubmit(this.action,this.type)\r\n    \t\t\t}else{\r\n    \t\t\t\tthis.$toast('请填写完整的地址信息')\r\n    \t\t\t}\r\n    \t\t}else if(this.orderType == 1){\r\n  \t\t\t\tthis.getOrderSubmit(this.action,this.type)\r\n    \t\t}\r\n      \tthis.setInputValue()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  @import \"../../sass/baseSass.scss\";\r\n  #confirm-order{\r\n    padding-bottom: 1.6rem;\r\n    min-height: 100%;\r\n    background: #f0f0f0;\r\n    .arrow_gray {\r\n      @include rt-arrow;\r\n    }\r\n\r\n    .order-address{\r\n      padding:  0.44rem 0.41rem 0.49rem;\r\n      position: relative;\r\n      font-size: 0.37rem;\r\n      color: #333;\r\n\r\n      .address-info{\r\n        width: 100%;\r\n        padding: 0 0.45rem 0 0.7rem;\r\n        background: url(\"../../assets/cart/ico_location.png\") no-repeat center left;\r\n        background-size: 0.43rem auto;\r\n      }\r\n      .address-detail{\r\n        margin-top: 0.35rem;\r\n      }\r\n    }\r\n    .order-address img.address-bor{\r\n      width: 100%;\r\n      height: 0.05rem;\r\n      position: absolute;\r\n      bottom: 0;\r\n      left: 0;\r\n    }\r\n    .detail-shop{\r\n      margin-top: 0.27rem;\r\n    }\r\n    .list-item{\r\n      width: 100%;\r\n      /*height: box(220);*/\r\n      border-bottom: solid #ccc 1px;\r\n      padding: box(30);\r\n\r\n      .item-img{\r\n        width: 2.13rem;\r\n        height: 2.13rem;\r\n        position: relative;\r\n\r\n        img{\r\n          width: 2.13rem;\r\n          height: 2.13rem;\r\n          border-radius: 0.11rem;\r\n        }\r\n\r\n      }\r\n      .item-info{\r\n        width: 6.55rem;\r\n        height: 2.13rem;\r\n        position: 0.33rem;\r\n        margin-left: box(30);\r\n        color: #1a1a1a;\r\n\r\n        .title{\r\n          font-size: 0.34rem;\r\n          /*height: 0.9rem;*/\r\n          @include textflow-two;\r\n          margin-bottom: 0.15rem;\r\n        }\r\n        span{\r\n          font-size: 0.30rem;\r\n          color: #666666;\r\n        }\r\n        .goods-prices{\r\n          /*margin-top: 0.15rem;*/\r\n        }\r\n        .packprice{\r\n\t\t\t\t\tcolor: $price-color;\r\n\t\t\t\t\tfont-size: 0.32rem;\r\n\t\t\t\t}\r\n        .price {\r\n          color: $price-color;\r\n          font-size: 0.43rem;\r\n        }\r\n        .item-count{\r\n          font-size: 0.32rem;\r\n\r\n        }\r\n      }\r\n    }\r\n    .span-tag{\r\n      border-radius: 5px;\r\n      border: solid 1px #fe4436;\r\n      padding: 0.1rem 0.15rem;\r\n      color: $price-color;\r\n      font-size: 0.27rem;\r\n    }\r\n    .order-msg{\r\n      height: 100%;\r\n      width: 7.5rem;\r\n      text-align: right;\r\n      font-size: 0.4rem;\r\n    }\r\n    .order-price{\r\n      font-size: 0.4rem;\r\n      width: 100%;\r\n      padding: 0.41rem;\r\n    }\r\n    .footer {\r\n      position: fixed;\r\n      right: 0;\r\n      bottom: 0;\r\n      left: 0;\r\n      background: #fff;\r\n      height: 1.31rem;\r\n      line-height: 1.31rem;\r\n      .total-price {\r\n        font-size: 0.4rem;\r\n        color: $text-color;\r\n      }\r\n      .price {\r\n        color: $price-color;\r\n        font-size: 0.4rem;\r\n        margin-right: 0.4rem;\r\n      }\r\n      .goods-account {\r\n        display: inline-block;\r\n        font-size: 0.43rem;\r\n        color: #fff;\r\n      @include bg-color;\r\n        width: 2.91rem;\r\n        height: 1.31rem;\r\n        line-height: 1.31rem;\r\n        text-align: center;\r\n      }\r\n    }\r\n  }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Customized/Confirm.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"confirm-order\"}},[_c('common-header',{attrs:{\"title\":'确认定制'}}),_vm._v(\" \"),(_vm.showType)?_c('div',{staticClass:\"cell bg-fff\",on:{\"click\":_vm.showOT}},[_vm._v(\"\\n      赠礼类型\\n      \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.orderType===1),expression:\"orderType===1\"}],staticClass:\"fl-right\"},[_vm._v(\"存入礼物包\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.orderType===0),expression:\"orderType===0\"}],staticClass:\"fl-right\"},[_vm._v(\"实物发货\")]),_vm._v(\" \"),_c('img',{staticClass:\"arrow_gray\",attrs:{\"src\":require(\"../../assets/arrow_gray.png\")}})]):_vm._e(),_vm._v(\" \"),(!_vm.showType)?_c('div',{staticClass:\"cell bg-fff\"},[_vm._v(\"赠礼类型\\n      \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.orderType===1),expression:\"orderType===1\"}],staticClass:\"fl-right\"},[_vm._v(\"存入礼物包\")])]):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.orderType===0),expression:\"orderType===0\"}],staticClass:\"order-address bg-fff\",on:{\"click\":function($event){_vm.linkTo('ConfirmAddress')}}},[_c('div',{staticClass:\"address-info\"},[(_vm.confirmAddress)?[_c('div',{staticClass:\"name-phone clearfix\"},[_c('span',{staticClass:\"fl-left\"},[_vm._v(\"收货人：\"+_vm._s(_vm.confirmAddress.name))]),_vm._v(\" \"),_c('span',{staticClass:\"fl-right\"},[_vm._v(_vm._s(_vm.getMobile))])]),_vm._v(\" \"),_c('div',{staticClass:\"address-detail\"},[_vm._v(\"\\n\\t          \"+_vm._s(_vm.confirmAddress.regionInfo[0].region.name)+_vm._s(_vm.confirmAddress.regionInfo[1].region.name)+_vm._s(_vm.confirmAddress.regionInfo[2].region.name)+_vm._s(_vm.confirmAddress.street)+\"\\n\\t        \")]),_vm._v(\" \"),_c('img',{staticClass:\"arrow_gray\",attrs:{\"src\":require(\"../../assets/arrow_gray.png\")}})]:[_vm._v(\"未选择\")]],2),_vm._v(\" \"),_c('img',{staticClass:\"address-bor\",attrs:{\"src\":require(\"../../assets/cart/address_bor.png\")}})]),_vm._v(\" \"),_c('div',{staticClass:\"order-detail\"},_vm._l((_vm.orderList),function(item,index){return _c('div',{staticClass:\"detail-shop bg-fff\"},[_c('div',{staticClass:\"cell text-over\"},[_vm._v(_vm._s(item.orgName))]),_vm._v(\" \"),_c('div',{staticClass:\"good-list\"},[_vm._l((item.cartInfos),function(goods,index){return _c('div',{staticClass:\"list-item clearfix\"},[_c('div',{staticClass:\"item-img fl-left\"},[_c('img',{attrs:{\"src\":goods.imagePath,\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"item-info fl-left\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(goods.name))]),_vm._v(\" \"),_c('div',{staticClass:\"goods-prices\"},[_c('span',{staticClass:\"price\"},[_c('em',{staticStyle:{\"font-size\":\"0.32rem\"}},[_vm._v(\"￥\")]),_vm._v(_vm._s(goods.discountPrice))]),_vm._v(\" \"),_c('span',{staticClass:\"item-count fl-right\"},[_vm._v(\"x\"+_vm._s(goods.buyNum))])])])])}),_vm._v(\" \"),_c('div',{staticClass:\"cell bg-fff\",on:{\"click\":function($event){_vm.linkTo('ConfirmCoupon')}}},[_c('span',[_vm._v(\"优惠券\")]),_vm._v(\" \"),_c('span',{staticClass:\"span-tag\"},[_vm._v(\"0张可用\")]),_vm._v(\" \"),(false)?_c('span',{staticClass:\"fl-right\"},[_c('em',{staticStyle:{\"color\":\"#999\"}},[_vm._v(\"-\")]),_vm._v(\"￥100.0\")]):_c('span',{staticClass:\"fl-right\"},[_vm._v(\"未选择\")]),_vm._v(\" \"),_c('img',{staticClass:\"arrow_gray\",attrs:{\"src\":require(\"../../assets/arrow_gray.png\")}})]),_vm._v(\" \"),_c('div',{staticClass:\"cell bg-fff\"},[_vm._v(\"\\n            买家留言\\n            \"),_c('input',{ref:\"input\",refInFor:true,staticClass:\"order-msg fl-right\",attrs:{\"type\":\"text\",\"placeholder\":\"选填\"},domProps:{\"value\":_vm.inputs[index]},on:{\"input\":_vm.setInputValue}})]),_vm._v(\" \"),_c('div',{staticClass:\"cell bg-fff\",staticStyle:{\"border\":\"none\"}},[_c('span',{staticClass:\"fl-right\",staticStyle:{\"margin-right\":\"0\"}},[_vm._v(\"合计： \"),_c('em',{staticStyle:{\"color\":\"#fe4436\"}},[_vm._v(\"￥\"+_vm._s(_vm.shopPrices[index]))])])])],2)])})),_vm._v(\" \"),_c('div',{staticClass:\"detail-shop order-price bg-fff\"},[_c('div',{staticStyle:{\"margin-bottom\":\"0.32rem\"}},[_vm._v(\"总金额\"),_c('span',{staticClass:\"fl-right\",staticStyle:{\"color\":\"#fe4436\"}},[_vm._v(_vm._s(_vm.shopPrices[0]))])]),_vm._v(\" \"),_c('div',[_vm._v(\"优惠券\"),_c('span',{staticClass:\"fl-right\",staticStyle:{\"color\":\"#fe4436\"}},[_vm._v(\" -￥\"+_vm._s(_vm.reductionAmount))])])]),_vm._v(\" \"),_c('div',{staticClass:\"footer\"},[_c('div',{staticClass:\"fl-right\"},[_c('span',{staticClass:\"total-price\"},[_vm._v(\"实付款：\")]),_vm._v(\" \"),_c('span',{staticClass:\"price\"},[_vm._v(\"￥\"+_vm._s(_vm.shopPrices[0]))]),_vm._v(\" \"),_c('span',{staticClass:\"goods-account\",on:{\"click\":_vm.linkToCashier}},[_vm._v(\"提交订单\")])])]),_vm._v(\" \"),(_vm.showOrderType)?_c('div',{staticClass:\"shadow\"},[_c('BottomPopup',{attrs:{\"itemList\":_vm.itemList},on:{\"selItem\":_vm.getBottomPopup}})],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-24428c01\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Customized/Confirm.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"importLoader\\\":2}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-24428c01\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Confirm.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Confirm.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Confirm.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-24428c01\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Confirm.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Customized/Confirm.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}