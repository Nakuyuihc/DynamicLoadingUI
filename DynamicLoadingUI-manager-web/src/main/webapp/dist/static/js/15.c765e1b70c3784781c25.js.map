{"version":3,"sources":["webpack:///./node_modules/babel-runtime/core-js/get-iterator.js","webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js","webpack:///src/pages/Cart/ConfirmOrder.vue","webpack:///./src/pages/Cart/ConfirmOrder.vue?a286","webpack:///./src/pages/Cart/ConfirmOrder.vue"],"names":["module","exports","default","__webpack_require__","__esModule","anObject","get","getIterator","it","iterFn","TypeError","call","action","type","BottomPopup","toString","_iteratorNormalCompletion","_step","value","totalPrice","_iteratorNormalCompletion2","_step2","couponPrice","initOrderType","initInput","initAddress","_this","this","shop","str","orderList","packPrice","discountPrice","shopPrices","orderType","_this2","confirmAddress","res","addresses","item","_this3","input","inputs","arr","text","id","_this4","orgId","index","skuId","spuId","buyNum","promId","customId","storeId","goodObj","goods","shopObj","shops","params","goodsAmount","realAmount","reductionAmount","orderId","clearStorage","_params","d","setInputValue","Cart_ConfirmOrder","render","_vm","_h","$createElement","_c","_self","attrs","title","_v","staticClass","on","click","showOT","directives","name","rawName","expression","src","_e","showType","$event","linkTo","_s","getMobile","regionInfo","region","street","_l","orgName","imagePath","alt","productSize","packing","staticStyle","font-size","originalPrice","ref","refInFor","placeholder","domProps","border","margin-right","color","margin-bottom","linkToCashier","itemList","selItem","getBottomPopup","staticRenderFns","Component","normalizeComponent","ConfirmOrder","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/15.c765e1b70c3784781c25.js","sourcesContent":["module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/get-iterator.js\n// module id = BO1k\n// module chunks = 14 15","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/get-iterator.js\n// module id = fxRn\n// module chunks = 14 15","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator.js\n// module id = g8Ux\n// module chunks = 14 15","<template>\n  <div id=\"confirm-order\">\n  \t<common-header :title=\"'确认订单'\"></common-header>\n  \t\n    <div class=\"cell bg-fff\" @click=\"showOT\" v-if=\"showType\">\n      赠礼类型\n      <span class=\"fl-right\" v-show=\"orderType===1\">存入礼物包</span>\n      <span class=\"fl-right\" v-show=\"orderType===0\">实物发货</span>\n      <img src=\"../../assets/arrow_gray.png\" class=\"arrow_gray\">\n    </div>\n    \n    <!--送给好友进来-->\n    <div class=\"cell bg-fff\"  v-if=\"!showType\">赠礼类型\n      <span class=\"fl-right\" v-show=\"orderType===1\">存入礼物包</span>\n    </div>\n    \n    <div class=\"order-address bg-fff\" v-show=\"orderType===0\" @click=\"linkTo('ConfirmAddress')\">\n      <div class=\"address-info\">\n      \t<template v-if=\"confirmAddress\">\n\t        <div class=\"name-phone clearfix\">\n\t          <span class=\"fl-left\">收货人：{{confirmAddress.name}}</span>\n\t          <span class=\"fl-right\">{{getMobile}}</span>\n\t        </div>\n\t        <div class=\"address-detail\">\n\t          {{confirmAddress.regionInfo[0].region.name}}{{confirmAddress.regionInfo[1].region.name}}{{confirmAddress.regionInfo[2].region.name}}{{confirmAddress.street}}\n\t        </div>\n\t        <img src=\"../../assets/arrow_gray.png\" class=\"arrow_gray\">\n      \t</template>\n      \t<template v-else>未选择</template>\n      </div>\n      <img src=\"../../assets/cart/address_bor.png\" class=\"address-bor\">\n    </div>\n    <!--订单详情-->\n    <div class=\"order-detail\">\n      <!--列表项-->\n      <div class=\"detail-shop bg-fff\" v-for=\"(item,index) in orderList\">\n        <div class=\"cell text-over\">{{item.orgName}}</div>\n        <div class=\"good-list\">\n          <div class=\"list-item clearfix\" v-for=\"(goods,index) in item.cartInfos\">\n            <div class=\"item-img fl-left\">\n              <img :src=\"goods.imagePath\" alt=\"\">\n            </div>\n            <div class=\"item-info fl-left\">\n              <div class=\"title\">{{goods.name}}</div>\n              <div>{{goods.productSize}} <span v-if=\"goods.packing\">({{goods.packing.name}})</span></div>\n              <div class=\"goods-prices\">\n\t              <div class=\"packprice\" v-if=\"goods.packPrice > 0\">包装费：￥{{goods.packPrice}}</div>\n              \t<span class=\"price\"><em style=\"font-size: 0.32rem\">￥</em>{{goods.discountPrice}}</span><del>￥{{goods.originalPrice}}</del>\n              \t<span class=\"item-count fl-right\">x{{goods.buyNum}}</span>\n              </div>\n            </div>\n          </div>\n          <div class=\"cell bg-fff\" @click=\"linkTo('ConfirmCoupon')\">\n            <span>优惠券</span>\n            <span class=\"span-tag\">0张可用</span>\n            <span class=\"fl-right\" v-if=\"false\"><em style=\"color: #999\">-</em>￥100.0</span>\n            <span class=\"fl-right\" v-else>未选择</span>\n            <img src=\"../../assets/arrow_gray.png\" class=\"arrow_gray\">\n          </div>\n          <div class=\"cell bg-fff\">\n            买家留言\n            <input type=\"text\" placeholder=\"选填\" class=\"order-msg fl-right\" ref='input' @input=\"setInputValue\" :value=\"inputs[index]\">\n          </div>\n          <div class=\"cell bg-fff\" style=\"border: none\">\n            <span class=\"fl-right\" style=\"margin-right:0;\">合计： <em style=\"color: #fe4436;\">￥{{shopPrices[index]}}</em></span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"detail-shop order-price bg-fff\">\n      <div style=\"margin-bottom: 0.32rem\">总金额<span class=\"fl-right\" style=\"color: #fe4436;\"> ￥{{goodsAmount}}</span></div>\n      <div>优惠券<span class=\"fl-right\" style=\"color: #fe4436;\"> -￥{{reductionAmount}}</span></div>\n    </div>\n    <div class=\"footer\">\n      <div class=\"fl-right\">\n        <span class=\"total-price\">实付款：</span>\n        <span class=\"price\">￥{{realAmount}}</span>\n        <span class=\"goods-account\" @click=\"linkToCashier\">提交订单</span>\n      </div>\n    </div>\n    <!-- 底部弹窗 -->\n    <div class=\"shadow\" v-if=\"showOrderType\">\n      <BottomPopup :itemList=\"itemList\" @selItem=\"getBottomPopup\"></BottomPopup>\n    </div>\n  </div>\n</template>\n\n<script>\n  import BottomPopup from '../../components/Popup/BottomPopup'\n\t\n  export default {\n    data () {\n      return {\n        itemList: [\n          {\n            text: '存入礼物包',\n            id: 1\n          },\n          {\n            text: '实物发货',\n            id: 0\n          }\n        ],\n        showType:true,\n        showOrderType: false,\n        orderType: 1,\n        orderList:[],\n        shopPrices:[],\n        couponPrices:[],\n        inputs:[],\n        payment:0,\n        confirmAddress:'',\n        goodsAmount:0,\n        reductionAmount:0,\n        realAmount:0,\n        orderId:'',\n        action:this.$route.query.action,\n        type:this.$route.query.type,\n      }\n    },\n    watch: {},\n    components: {\n      BottomPopup\n    },\n    computed:{\n    \tgetMobile(){\n    \t\tif(this.confirmAddress){\n    \t\t\tlet phone = this.confirmAddress.mobile.toString()\n    \t\t\tlet mobile = phone.substring(0,3) + '****' + phone.substring(7,11)\n    \t\t\treturn mobile\n    \t\t}\n    \t},\n    \t//总金额\n    \ttotalPrices(){\n    \t\tlet totalPrice = 0\n    \t\tfor(let item of this.shopPrices){\n    \t\t\ttotalPrice += item\n    \t\t}\n    \t\treturn totalPrice\n    \t},\n    \t//优惠券\n    \ttotalCoupon(){\n    \t\tlet couponPrice = 0\n    \t\tfor(let item of this.couponPrices){\n    \t\t\tcouponPrice += item\n    \t\t}\n    \t\treturn couponPrice\n    \t},\n    },\n    created(){\n    \tthis.initOrderType()\n    \tthis.initOrderList()\n//  \tthis.initAddress()\n    \tthis.initInput()\n    \t\n      this.getOrderSubmit(2,1)//购物车算价格\n    },\n    mounted(){\n    \tthis.initAddress()\n    },\n    methods: {\n      showOT(){\n        this.showOrderType = true\n      },\n      initOrderList(){\n      \tlet giftObj = JSON.parse( localStorage.getItem('giftObj') ) \n      \tif(giftObj && this.$route.query.action == 3){\n      \t\tthis.showType = false\n          this.orderType = 1\n      \t\tthis.orderList = giftObj.shop\n      \t}else{\n\t      \tlet str = localStorage.getItem('orderList')\n\t\t    \tlet orderList = JSON.parse(str)\n\t\t    \tconsole.log(orderList)\n\t\t    \tthis.orderList = orderList\n      \t}\n\t    \t\n\t    \t//计算总价\n\t    \tthis.orderList.forEach((res)=>{\n\t    \t\tlet shopPrices = 0\n\t    \t\tres.cartInfos.forEach((val)=>{\n\t    \t\t\tif(val.packPrice && val.packPrice > 0){\n\t    \t\t\t\tshopPrices += val.buyNum * val.discountPrice + val.packPrice\n\t    \t\t\t}else{\n\t    \t\t\t\tshopPrices += val.buyNum * val.discountPrice\n\t    \t\t\t}\n\t    \t\t})\n\t    \t\tthis.shopPrices.push(shopPrices)\n\t    \t})\n      },\n      \n      initOrderType(){\n      \tif(localStorage.getItem('orderType')){\n      \t\tlet orderType = localStorage.getItem('orderType')\n      \t\tthis.orderType = parseInt(orderType) \n      \t}\n      },\n      \n      initAddress(){\n      \t//判断是否已经选择\n      \tif(localStorage.getItem('confirmAddress')){\n      \t\tlet confirmAddress = JSON.parse(localStorage.getItem('confirmAddress'))\n      \t\tthis.confirmAddress = confirmAddress\n      \t\tconsole.log(confirmAddress)\n      \t}else{\n\t\t\t\t\t//获取默认地址\n\t\t\t\t\tthis.$Api.getShippingAddressList().then((res)=>{\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\tif(res.q.s == 0){\n\t\t\t\t\t\t\tif(res.q.total > 0){\n\t\t\t\t\t\t\t\tlet addresses = res.q.addresses\n\t\t\t\t\t\t\t\taddresses.forEach((item)=>{\n\t\t\t\t\t\t\t\t\tif(item.selected == 1){\n\t\t\t\t\t\t\t\t\t\tconsole.log(item)\n\t\t\t\t\t\t\t\t\t\tthis.confirmAddress = item\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n      \t}\n      },\n      initInput(){\n      \tif(localStorage.getItem('inputs')){\n      \t\tthis.inputs = JSON.parse( localStorage.getItem('inputs') )\n      \t}\n      },\n      \n      setInputValue(){\n      \tlet inputs = this.$refs.input\n      \tthis.inputs = []\n      \tinputs.forEach((item)=>{\n      \t\tthis.inputs.push(item.value)\n      \t})\n      \tlet arr = JSON.stringify(this.inputs)\n      \tlocalStorage.setItem('inputs',arr)\n      },\n      \n      //清除缓存\n      clearStorage(){\n      \tlocalStorage.removeItem('orderType')\n      \tlocalStorage.removeItem('orderList')\n      \tlocalStorage.removeItem('confirmAddress')\n      \tlocalStorage.removeItem('inputs')\n      \tlocalStorage.removeItem('giftObj')\n      },\n      \n      getBottomPopup(item){\n        localStorage.removeItem('orderType')\n        if(item != 'cancel'){\n          this.orderTypeText = item.text;\n          this.orderType = item.id;\n          localStorage.setItem('orderType',item.id)\n        }\n        this.showOrderType = false\n      },\n      \n      getOrderSubmit(action,type){\n      \tlet orderList = this.orderList\n      \tlet shops = []\n\t\t\t\torderList.forEach((item,index)=>{\n\t\t\t\t\tlet goods = []\n      \t\tlet shopObj = {}\n\t\t\t\t\tshopObj.orgId = item.orgId\n      \t\tshopObj.note  = this.inputs[index]\n      \t\tshopObj.coupons = ''\n\t\t\t\t\titem.cartInfos.forEach((item,index)=>{\n      \t\t\tlet goodObj = {}\n\t\t\t\t\t\tgoodObj.skuId = item.skuId\n\t      \t\tgoodObj.spuId = item.spuId\n\t      \t\tgoodObj.num = item.buyNum\n\t      \t\tgoodObj.promId  = item.promId\n\t      \t\tgoodObj.customId = item.customId\n\t      \t\tgoodObj.packingId = item.packing.id\n\t      \t\tgoodObj.storeId = item.storeId\n\t      \t\tgoods.push(goodObj)\n\t\t\t\t\t})\n\t\t\t\t\tshopObj.goodsList = goods\n      \t\tshops.push(shopObj)\n\t\t\t\t})\n      \tconsole.log(shops)\n      \t\n      \tlet params = {\n      \t\ta:action,\n      \t\tt:type,\n      \t\tsendType:this.orderType,\n//    \t\taddresId:this.confirmAddress.id?this.confirmAddress.id:'0',\n      \t\taddresId:this.orderType == '1'? '0':this.confirmAddress.id,\n      \t\tshops:shops,\n      \t}\n      \tconsole.log(params)\n      \tthis.$Api.getOrderSubmit(params).then((res)=>{\n//    \t\tconsole.log(res)\n\t\t\t\t\tif(res.q.s == 0){\n\t\t\t\t\t\tthis.goodsAmount = res.q.goodsAmount\n\t\t\t\t\t\tthis.realAmount = res.q.realAmount\n\t\t\t\t\t\tthis.reductionAmount = res.q.reductionAmount\n\t\t\t\t\t\tthis.orderId = res.q.orderId\n\n\t\t\t\t\t\tif(params.a == 1 || params.a == 3){\n\t\t\t\t    \tthis.clearStorage()\n\t\t\t\t    \t//判断是否在微信\n\t\t\t\t\t\t\tif(this.$call.testType().wechat){\n\t\t\t\t\t      this.$router.replace({name: 'Cashier',query:{orderId:this.orderId,realAmount:this.realAmount}})\n      \t\t\t\t}else{\n      \t\t\t\t\tlet params = {\n\t      \t\t\t\t\taction:0,\n\t      \t\t\t\t\tamount:this.realAmount,\n\t      \t\t\t\t\torderId : this.orderId\n\t      \t\t\t\t}\n      \t\t\t\t\tcheckOutCounter(params)\n      \t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.$toast(res.q.d)\n\t\t\t\t\t}\n      \t})\n      },\n      linkToCashier(){\n      \tlet action = this.action\n\t\t\t\tlet type = this.type\n      \t//实物发货\n\t\t\t\tif(this.orderType == 0){\n    \t\t\tif(this.confirmAddress.id){\n    \t\t\t\tthis.getOrderSubmit(this.action,this.type)\n    \t\t\t}else{\n    \t\t\t\tthis.$toast('请填写完整的地址信息')\n    \t\t\t}\n    \t\t}else if(this.orderType == 1){\n  \t\t\t\tthis.getOrderSubmit(this.action,this.type)\n    \t\t}\n      \tthis.setInputValue()\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n  @import \"../../sass/baseSass.scss\";\n  #confirm-order{\n    padding-bottom: 1.6rem;\n    min-height: 100%;\n    background: #f0f0f0;\n    .arrow_gray {\n      @include rt-arrow;\n    }\n\n    .order-address{\n      padding:  0.44rem 0.41rem 0.49rem;\n      position: relative;\n      font-size: 0.37rem;\n      color: #333;\n\n      .address-info{\n        width: 100%;\n        padding: 0 0.45rem 0 0.7rem;\n        background: url(\"../../assets/cart/ico_location.png\") no-repeat center left;\n        background-size: 0.43rem auto;\n      }\n      .address-detail{\n        margin-top: 0.35rem;\n      }\n    }\n    .order-address img.address-bor{\n      width: 100%;\n      height: 0.05rem;\n      position: absolute;\n      bottom: 0;\n      left: 0;\n    }\n    .detail-shop{\n      margin-top: 0.27rem;\n    }\n    .list-item{\n      width: 100%;\n      /*height: box(220);*/\n      border-bottom: solid #ccc 1px;\n      padding: box(30);\n\n      .item-img{\n        width: 2.13rem;\n        height: 2.13rem;\n        position: relative;\n\n        img{\n          width: 2.13rem;\n          height: 2.13rem;\n          border-radius: 0.11rem;\n        }\n\n      }\n      .item-info{\n        width: 6.55rem;\n        height: 2.13rem;\n        position: 0.33rem;\n        margin-left: box(30);\n        color: #1a1a1a;\n\n        .title{\n          font-size: 0.34rem;\n          /*height: 0.9rem;*/\n          @include textflow-two;\n          margin-bottom: 0.15rem;\n        }\n        span{\n          font-size: 0.30rem;\n          color: #666666;\n        }\n        .goods-prices{\n          /*margin-top: 0.15rem;*/\n         >del{\n         \t\tmargin-left: 0.26667rem;\n\t\t\t\t    font-size: 0.34667rem;\n\t\t\t\t    color: #999;\n         }\n        }\n        .packprice{\n\t\t\t\t\tcolor: $price-color;\n\t\t\t\t\tfont-size: 0.32rem;\n\t\t\t\t}\n        .price {\n          color: $price-color;\n          font-size: 0.43rem;\n        }\n        .item-count{\n          font-size: 0.32rem;\n\n        }\n      }\n    }\n    .span-tag{\n      border-radius: 5px;\n      border: solid 1px #fe4436;\n      padding: 0.1rem 0.15rem;\n      color: $price-color;\n      font-size: 0.27rem;\n    }\n    .order-msg{\n      height: 100%;\n      width: 7.5rem;\n      text-align: right;\n      font-size: 0.4rem;\n    }\n    .order-price{\n      font-size: 0.4rem;\n      width: 100%;\n      padding: 0.41rem;\n    }\n    .footer {\n      position: fixed;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      background: #fff;\n      height: 1.31rem;\n      line-height: 1.31rem;\n      .total-price {\n        font-size: 0.4rem;\n        color: $text-color;\n      }\n      .price {\n        color: $price-color;\n        font-size: 0.4rem;\n        margin-right: 0.4rem;\n      }\n      .goods-account {\n        display: inline-block;\n        font-size: 0.43rem;\n        color: #fff;\n      @include bg-color;\n        width: 2.91rem;\n        height: 1.31rem;\n        line-height: 1.31rem;\n        text-align: center;\n      }\n    }\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Cart/ConfirmOrder.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"confirm-order\"}},[_c('common-header',{attrs:{\"title\":'确认订单'}}),_vm._v(\" \"),(_vm.showType)?_c('div',{staticClass:\"cell bg-fff\",on:{\"click\":_vm.showOT}},[_vm._v(\"\\n      赠礼类型\\n      \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.orderType===1),expression:\"orderType===1\"}],staticClass:\"fl-right\"},[_vm._v(\"存入礼物包\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.orderType===0),expression:\"orderType===0\"}],staticClass:\"fl-right\"},[_vm._v(\"实物发货\")]),_vm._v(\" \"),_c('img',{staticClass:\"arrow_gray\",attrs:{\"src\":require(\"../../assets/arrow_gray.png\")}})]):_vm._e(),_vm._v(\" \"),(!_vm.showType)?_c('div',{staticClass:\"cell bg-fff\"},[_vm._v(\"赠礼类型\\n      \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.orderType===1),expression:\"orderType===1\"}],staticClass:\"fl-right\"},[_vm._v(\"存入礼物包\")])]):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.orderType===0),expression:\"orderType===0\"}],staticClass:\"order-address bg-fff\",on:{\"click\":function($event){_vm.linkTo('ConfirmAddress')}}},[_c('div',{staticClass:\"address-info\"},[(_vm.confirmAddress)?[_c('div',{staticClass:\"name-phone clearfix\"},[_c('span',{staticClass:\"fl-left\"},[_vm._v(\"收货人：\"+_vm._s(_vm.confirmAddress.name))]),_vm._v(\" \"),_c('span',{staticClass:\"fl-right\"},[_vm._v(_vm._s(_vm.getMobile))])]),_vm._v(\" \"),_c('div',{staticClass:\"address-detail\"},[_vm._v(\"\\n\\t          \"+_vm._s(_vm.confirmAddress.regionInfo[0].region.name)+_vm._s(_vm.confirmAddress.regionInfo[1].region.name)+_vm._s(_vm.confirmAddress.regionInfo[2].region.name)+_vm._s(_vm.confirmAddress.street)+\"\\n\\t        \")]),_vm._v(\" \"),_c('img',{staticClass:\"arrow_gray\",attrs:{\"src\":require(\"../../assets/arrow_gray.png\")}})]:[_vm._v(\"未选择\")]],2),_vm._v(\" \"),_c('img',{staticClass:\"address-bor\",attrs:{\"src\":require(\"../../assets/cart/address_bor.png\")}})]),_vm._v(\" \"),_c('div',{staticClass:\"order-detail\"},_vm._l((_vm.orderList),function(item,index){return _c('div',{staticClass:\"detail-shop bg-fff\"},[_c('div',{staticClass:\"cell text-over\"},[_vm._v(_vm._s(item.orgName))]),_vm._v(\" \"),_c('div',{staticClass:\"good-list\"},[_vm._l((item.cartInfos),function(goods,index){return _c('div',{staticClass:\"list-item clearfix\"},[_c('div',{staticClass:\"item-img fl-left\"},[_c('img',{attrs:{\"src\":goods.imagePath,\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"item-info fl-left\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(goods.name))]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(goods.productSize)+\" \"),(goods.packing)?_c('span',[_vm._v(\"(\"+_vm._s(goods.packing.name)+\")\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"goods-prices\"},[(goods.packPrice > 0)?_c('div',{staticClass:\"packprice\"},[_vm._v(\"包装费：￥\"+_vm._s(goods.packPrice))]):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"price\"},[_c('em',{staticStyle:{\"font-size\":\"0.32rem\"}},[_vm._v(\"￥\")]),_vm._v(_vm._s(goods.discountPrice))]),_c('del',[_vm._v(\"￥\"+_vm._s(goods.originalPrice))]),_vm._v(\" \"),_c('span',{staticClass:\"item-count fl-right\"},[_vm._v(\"x\"+_vm._s(goods.buyNum))])])])])}),_vm._v(\" \"),_c('div',{staticClass:\"cell bg-fff\",on:{\"click\":function($event){_vm.linkTo('ConfirmCoupon')}}},[_c('span',[_vm._v(\"优惠券\")]),_vm._v(\" \"),_c('span',{staticClass:\"span-tag\"},[_vm._v(\"0张可用\")]),_vm._v(\" \"),(false)?_c('span',{staticClass:\"fl-right\"},[_c('em',{staticStyle:{\"color\":\"#999\"}},[_vm._v(\"-\")]),_vm._v(\"￥100.0\")]):_c('span',{staticClass:\"fl-right\"},[_vm._v(\"未选择\")]),_vm._v(\" \"),_c('img',{staticClass:\"arrow_gray\",attrs:{\"src\":require(\"../../assets/arrow_gray.png\")}})]),_vm._v(\" \"),_c('div',{staticClass:\"cell bg-fff\"},[_vm._v(\"\\n            买家留言\\n            \"),_c('input',{ref:\"input\",refInFor:true,staticClass:\"order-msg fl-right\",attrs:{\"type\":\"text\",\"placeholder\":\"选填\"},domProps:{\"value\":_vm.inputs[index]},on:{\"input\":_vm.setInputValue}})]),_vm._v(\" \"),_c('div',{staticClass:\"cell bg-fff\",staticStyle:{\"border\":\"none\"}},[_c('span',{staticClass:\"fl-right\",staticStyle:{\"margin-right\":\"0\"}},[_vm._v(\"合计： \"),_c('em',{staticStyle:{\"color\":\"#fe4436\"}},[_vm._v(\"￥\"+_vm._s(_vm.shopPrices[index]))])])])],2)])})),_vm._v(\" \"),_c('div',{staticClass:\"detail-shop order-price bg-fff\"},[_c('div',{staticStyle:{\"margin-bottom\":\"0.32rem\"}},[_vm._v(\"总金额\"),_c('span',{staticClass:\"fl-right\",staticStyle:{\"color\":\"#fe4436\"}},[_vm._v(\" ￥\"+_vm._s(_vm.goodsAmount))])]),_vm._v(\" \"),_c('div',[_vm._v(\"优惠券\"),_c('span',{staticClass:\"fl-right\",staticStyle:{\"color\":\"#fe4436\"}},[_vm._v(\" -￥\"+_vm._s(_vm.reductionAmount))])])]),_vm._v(\" \"),_c('div',{staticClass:\"footer\"},[_c('div',{staticClass:\"fl-right\"},[_c('span',{staticClass:\"total-price\"},[_vm._v(\"实付款：\")]),_vm._v(\" \"),_c('span',{staticClass:\"price\"},[_vm._v(\"￥\"+_vm._s(_vm.realAmount))]),_vm._v(\" \"),_c('span',{staticClass:\"goods-account\",on:{\"click\":_vm.linkToCashier}},[_vm._v(\"提交订单\")])])]),_vm._v(\" \"),(_vm.showOrderType)?_c('div',{staticClass:\"shadow\"},[_c('BottomPopup',{attrs:{\"itemList\":_vm.itemList},on:{\"selItem\":_vm.getBottomPopup}})],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-125ca9f0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Cart/ConfirmOrder.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"importLoader\\\":2}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-125ca9f0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ConfirmOrder.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ConfirmOrder.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ConfirmOrder.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-125ca9f0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ConfirmOrder.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Cart/ConfirmOrder.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}