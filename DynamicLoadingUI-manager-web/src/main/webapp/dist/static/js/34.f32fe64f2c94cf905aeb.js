webpackJsonp([34],{OuUB:function(t,s){},fjJb:function(t,s){},q4QM:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Xevy"),n={props:{confirmAddress:{type:Object,default:{}}},computed:{getMobile:function(){if(this.confirmAddress){var t=this.confirmAddress.mobile.toString();return t.substring(0,3)+"****"+t.substring(7,11)}}}},r={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"bg-fff",attrs:{id:"address"},on:{click:function(s){t.linkTo("ConfirmAddress")}}},[i("div",{staticClass:"address-info"},[t.confirmAddress?[i("div",{staticClass:"name-phone clearfix"},[i("span",{staticClass:"fl-left"},[t._v("收货人："+t._s(t.confirmAddress.name))]),t._v(" "),i("span",{staticClass:"fl-right"},[t._v(t._s(t.getMobile))])]),t._v(" "),i("div",{staticClass:"address-detail"},[t._v("\n        "+t._s(t.confirmAddress.regionInfo[0].region.name)+t._s(t.confirmAddress.regionInfo[1].region.name)+t._s(t.confirmAddress.regionInfo[2].region.name)+t._s(t.confirmAddress.street)+"\n      ")]),t._v(" "),i("img",{staticClass:"arrow_gray",attrs:{src:e("R8dh")}})]:[t._v("未选择")]],2),t._v(" "),i("img",{staticClass:"address-bor",attrs:{src:e("9JnP")}})])},staticRenderFns:[]},o=e("VU/8")(n,r,!1,function(t){e("OuUB")},null,null).exports,d=e("C5nv"),a={data:function(){return{value:1,gifts:[],confirmAddress:{},note:"",skuId:"",spuId:"",promId:"",customId:"",spuType:"",orgId:""}},created:function(){this.getGiftDetail(),this.initAddress()},computed:{maxNum:function(){var t=0;return this.gifts.length>0&&(t=this.gifts[0].num),t}},methods:{getNote:function(t){this.note=t,console.log(t)},valueChange:function(t){this.value+=t},getGiftDetail:function(){var t=this,s=this.$route.query.packageId;this.$Api.getGiftDetails(1,s).then(function(s){console.log(s),0==s.q.s&&(t.gifts=s.q.gifts,t.packageId=s.q.packageId)})},initAddress:function(){var t=this;if(localStorage.getItem("confirmAddress")){var s=JSON.parse(localStorage.getItem("confirmAddress"));this.confirmAddress=s,console.log(s)}else this.$Api.getShippingAddressList().then(function(s){if(console.log(s),0==s.q.s&&s.q.total>0){s.q.addresses.forEach(function(s){1==s.selected&&(console.log(s),t.confirmAddress=s)})}})},confirm:function(){var t=this,s=[],e=this.gifts[0],i={orgId:e.orgId,note:this.note,coupons:"",goodsList:[{skuId:e.skuId,spuId:e.spuId,num:e.num,promId:e.promId,customId:e.customId?e.customId:"0",storeId:e.storeId,packingId:this.packageId}]};s.push(i);var n={a:3,t:e.spuType,sendType:2,addresId:this.confirmAddress.id,shops:s};this.$Api.getOrderSubmit(n).then(function(s){0==s.q.s?(t.$toast(s.q.d),setTimeout(function(){t.$router.replace({name:"Gift"})},1500)):t.$toast(s.q.d)})}},components:{Gift:i.a,Cell:d.a,Address:o}},c={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"send"}},[s("commonHeader",{attrs:{title:"实物发货"}}),this._v(" "),s("Gift",{attrs:{gifts:this.gifts}}),this._v(" "),s("Address",{attrs:{confirmAddress:this.confirmAddress}}),this._v(" "),s("Cell",{attrs:{title:"发货数量",type:"count",num:this.value,max:this.maxNum},on:{change:this.valueChange}}),this._v(" "),s("Cell",{attrs:{title:"留言",type:"input",placeholder:"选填"},on:{input:this.getNote}}),this._v(" "),s("div",{staticClass:"submit__btn",class:{active:!0},on:{click:this.confirm}},[this._v("确认发货")])],1)},staticRenderFns:[]},f=e("VU/8")(a,c,!1,function(t){e("fjJb")},null,null);s.default=f.exports}});
//# sourceMappingURL=34.f32fe64f2c94cf905aeb.js.map