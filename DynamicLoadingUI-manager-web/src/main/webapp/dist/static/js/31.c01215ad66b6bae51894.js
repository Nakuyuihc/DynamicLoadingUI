webpackJsonp([31],{QXYs:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAbCAYAAAB1NA+iAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADIWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlDNjk0MEE4NkMzNTExRTdCOUVGRTcxM0UwODgwOEI5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlDNjk0MEE5NkMzNTExRTdCOUVGRTcxM0UwODgwOEI5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUM2OTQwQTY2QzM1MTFFN0I5RUZFNzEzRTA4ODA4QjkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2OTQwQTc2QzM1MTFFN0I5RUZFNzEzRTA4ODA4QjkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7t5cYzAAABvklEQVQ4T5WUzytlYRyH3+sPsBBJkpSMLETzDygLTEJC05SFjYWFjcWEBQtiYaOxYGFl4SYWt0nIGL+ThSz4NyS/Z0Q8n+/rcHHvPfc+9XTfz6nv55zznnNPJLoYcxmSj1HsxZMsHcmAAtzCGvyLVZkUFKKGyy05l43F6RYUoYbLLDl3j20YS6egGLex1JJz/7AFfyuEFZSghvUrblHDK5YgVYHOqGFdgdBwE65ZeiFZwRfUPevexQ1+ww1LcSQq0C5vonZdXGED6mo+8bGgAnVmPW9xgRretZSA+IJK1LDeNKHhOty3lISgoBp1f3mWnDvHWjy0lAIVfMU/mKsDcIYaPrIUggrGMMeSZwaP/TIcFbTjgSVPP/b4ZTgq0GbV454OQASnUH/XUIJNvEQ9rh1LvmQS+yylICgQ16gSvUQBE/jTLxMTXyD0vjfiuiXPOA745Wc+FgiVNOOqJc8oDvnlexIViDvU33bZkmcYR/zyjWQF4j+2YvxXdxB1S6+kKhD6dHXgkiWPNlWba4QVCJV8xwVLHj1ePeZIOgXiAX/gvCWPXrRf6RaIR+zEOUvOPeFpJgVCJV04i93OuelnkWROOxjvVgwAAAAASUVORK5CYII="},SuNj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("C5nv"),s=a("VO0z"),n=a("AJcs"),c=a.n(n),o={data:function(){return{way:"选择充值方式",heartNum:"",showOrderType:!1,itemList:[{text:"微信充值",id:1},{text:"钱包充值",id:2}],wayId:"",showPaw:!1,paypsw:"",wxPayObj:"",isPaypw:""}},created:function(){this.getUserDetails()},computed:{isComplete:function(){var t=!1;return"选择充值方式"!=this.way&&this.heartNum>0&&(t=!0),t}},components:{Cell:i.a,BottomPopup:s.a},methods:{rechargeWay:function(){this.showOrderType=!0},hidden:function(){this.showPaw=!1},getBottomPopup:function(t){"cancel"!=t&&(this.way=t.text,this.wayId=t.id),this.showOrderType=!1},getUserDetails:function(){var t=this;this.$Api.UserDetails(0).then(function(e){0==e.q.s&&(t.isPaypw=e.q.user.isPaypw)})},payment:function(){var t=this;1==this.wayId?this.getPaySubmit(11):2==this.wayId&&(1==this.isPaypw?this.showPaw=!0:this.$popup({title:"设置密码",content:"请先设置支付密码"}).then(function(e){"sure"==e&&t.$router.push({name:"EditPay",query:{type:1}})}))},getPaySubmit:function(t){var e=this,a={};if(3==t){if(!(this.paypsw.length>0))return void this.$toast("请输入密码");a={a:2,payment:t,amount:this.heartNum,psw:c()(this.$paykey+c()(this.paypsw))}}else 11==t&&(a={a:2,payment:t,amount:this.heartNum});this.$Api.PaySubmit(a).then(function(a){console.log(a),e.paypsw="",0==a.q.s?3==t?(e.$toast("充值成功"),setTimeout(function(){e.$router.go(-1)},1500)):11==t&&(e.wxPayObj=JSON.parse(a.q.wxPay),e.onBridgeReady()):e.$toast(a.q.d)})},onBridgeReady:function(){var t=this;console.log(this.wxPayObj),WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:this.wxPayObj.appId,timeStamp:this.wxPayObj.timeStamp,nonceStr:this.wxPayObj.nonceStr,package:this.wxPayObj.package,signType:this.wxPayObj.signType,paySign:this.wxPayObj.paySign},function(e){console.log(e),"get_brand_wcpay_request:ok"==e.err_msg&&(t.$toast("充值成功"),setTimeout(function(){t.$router.replace({name:"LoveHeart"})},1500))})}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"heart-recharge"}},[i("common-header",{attrs:{title:"爱心充值"}}),t._v(" "),i("Cell",{attrs:{title:"充值方式",value:t.way},on:{click:t.rechargeWay}}),t._v(" "),i("div",{staticClass:"link-cell no-arrow"},[i("span",[t._v("金额")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.heartNum,expression:"heartNum"}],staticClass:"text-input needsclick",attrs:{type:"number",placeholder:"1块钱兑换10个爱心"},domProps:{value:t.heartNum},on:{input:function(e){e.target.composing||(t.heartNum=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"btn",class:{active:t.isComplete},on:{click:t.payment}},[t._v("充值")]),t._v(" "),i("div",{staticClass:"text"},[t._v("\n    \t充值后系统可能会延迟到账，若您长时间未到账，请与我们联系\n    ")]),t._v(" "),t.showOrderType?i("div",{staticClass:"shadow"},[i("BottomPopup",{attrs:{itemList:t.itemList},on:{selItem:t.getBottomPopup}})],1):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showPaw,expression:"showPaw"}],staticClass:"shadow"},[i("div",{staticClass:"psw-wrap"},[i("div",{staticClass:"title"},[i("img",{staticClass:"lt-arrow",attrs:{src:a("QXYs")},on:{click:t.hidden}}),t._v(" 请输入支付密码\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"psw-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.paypsw,expression:"paypsw"}],attrs:{type:"password",name:"",placeholder:"支付密码"},domProps:{value:t.paypsw},on:{input:function(e){e.target.composing||(t.paypsw=e.target.value)}}}),i("span",{staticClass:"payment-btn active",on:{click:function(e){t.getPaySubmit(3)}}},[t._v("付款")])])])])])],1)},staticRenderFns:[]},p=a("VU/8")(o,l,!1,function(t){a("zMU4")},null,null);e.default=p.exports},zMU4:function(t,e){}});
//# sourceMappingURL=31.c01215ad66b6bae51894.js.map