webpackJsonp([68],{B2qG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("fZjL"),i=n.n(a),c={data:function(){return{bankList:[],isShowBank:!1,code:"",checkKey:"",accountName:"",accountIdCode:"",activeBank:{},changeBank:{},sended:!1,btnText:"获取验证码"}},created:function(){this.getBankList()},computed:{isFinish:function(){return""!=this.accountName&&""!=this.accountIdCode&&""!=this.code&&i()(this.activeBank).length>0}},methods:{getBankList:function(){var e=this;this.$Api.getBankList(3).then(function(t){console.log(t),0==t.q.s&&(e.bankList=t.q.banks)})},onCancel:function(){this.isShowBank=!1},onConfirm:function(e,t){this.activeBank=e,this.isShowBank=!1},sendCode:function(){var e=this;if(this.sended)return!1;this.sended=!0;for(var t=function(t){setTimeout(function(){e.btnText=t+"s",0==t&&(e.btnText="获取验证码",e.sended=!1)},1e3*(60-t-1))},n=60;n>=0;n--)t(n);var a={a:1,type:7,mobile:JSON.parse(localStorage.getItem("UserDetails")).mobile};this.$Api.SMSCode(a).then(function(t){0==t.q.s&&(e.checkKey=t.q.checkKey)})},addBankCard:function(){var e=this,t={id:0,accountIdCode:this.accountIdCode,accountName:this.accountName,accountBankId:this.activeBank.id};this.$Api.AddCard(t).then(function(t){console.log(t),0==t.q.s&&e.$router.replace({name:"WithDraw"})})},AddCard:function(){var e=this;if(!this.isFinish)return!1;var t={a:2,type:7,mobile:JSON.parse(localStorage.getItem("UserDetails")).mobile,checkKey:this.checkKey,code:this.code};this.$Api.SMSCode(t).then(function(t){0==t.q.s&&e.addBankCard()})}},components:{Cell:n("C5nv").a}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"addBankCard"}},[n("common-header",{attrs:{title:"添加银行卡"}}),e._v(" "),n("div",{staticClass:"addBankCard__title"},[e._v("请绑定持卡人本人的银行卡")]),e._v(" "),n("Cell",{attrs:{title:"持卡人",type:"input",placeholder:"请输入姓名"},model:{value:e.accountName,callback:function(t){e.accountName=t},expression:"accountName"}}),e._v(" "),n("Cell",{attrs:{title:"银行名称",value:e.activeBank.name},on:{click:function(t){e.isShowBank=!0}}}),e._v(" "),n("Cell",{attrs:{title:"卡号",type:"number",placeholder:"请输入银行卡号"},model:{value:e.accountIdCode,callback:function(t){e.accountIdCode=t},expression:"accountIdCode"}}),e._v(" "),n("div",{staticClass:"addBankCard__code"},[n("span",{staticClass:"code__text"},[e._v("验证码")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"code__input",attrs:{type:"text",placeholder:"请输入收到的验证码"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),e._v(" "),n("span",{staticClass:"code__btn",class:{sended:e.sended},on:{click:e.sendCode}},[e._v(e._s(e.btnText))])]),e._v(" "),n("div",{staticClass:"addBankCard__btn",class:{active:e.isFinish},on:{click:e.AddCard}},[e._v("绑定银行卡")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowBank,expression:"isShowBank"}],staticClass:"picker needsclick"},[n("van-picker",{attrs:{columns:e.bankList,"value-key":"name","show-toolbar":!0},on:{cancel:e.onCancel,confirm:e.onConfirm}})],1)],1)},staticRenderFns:[]},o=n("VU/8")(c,s,!1,function(e){n("l7uH")},null,null);t.default=o.exports},l7uH:function(e,t){}});
//# sourceMappingURL=68.fbb67b5f94259a55a3fc.js.map