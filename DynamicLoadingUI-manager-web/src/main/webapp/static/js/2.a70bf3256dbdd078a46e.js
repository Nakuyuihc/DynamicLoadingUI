webpackJsonp([2],{FDXP:function(t,e,a){t.exports=a.p+"static/img/common_icon_used@2x.4fab874.png"},POnu:function(t,e){},S2t3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={props:["tabIndex","couponList"],data:function(){return{showLoad:!1,allLoaded:!1,loading:"",bottomStatus:""}},computed:{},components:{},created:function(){},methods:{couponInit:function(){this.$route.name},countDay:function(t,e){var a="",n=t,s=e,i=(new Date).getTime(),o=new Date(s).getTime(),c=Date.parse(new Date(n.replace(/-/g,"/"))),u=Date.parse(new Date(s.replace(/-/g,"/")));i>=c&&(c=i);var r=u-c,d=Math.floor(r/864e5),l=r%864e5,p=Math.floor(l/36e5),m=l%36e5,v=Math.floor(m/6e4);if(!(i-o>=0))return d>0?(a=d,this.dateStr="天"):d<=0&&p>0?(a=p,this.dateStr="小时"):d<=0&&p<=0&&v>0&&(a=v,this.dateStr="分钟"),a},loadMore:function(){this.loading=!0,this.showLoad=!0,this.$emit("loadMore")}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"coupon"}},[n("div",{staticClass:"coupon-list"},[n("ul",t._l(t.couponList,function(e,s){return n("li",{staticClass:"coupon-item"},[n("div",{staticClass:"coupon-price",class:[1==t.tabIndex?"enable":"unable"]},[n("span",{staticClass:"price"},[n("em",[t._v("￥")]),t._v(t._s(e.totalAmount))])]),t._v(" "),n("div",{staticClass:"coupon-info"},[n("p",{staticClass:"coupon-name"},[t._v(t._s(e.name))]),t._v(" "),n("p",{staticClass:"coupon-code"},[t._v(t._s(e.cardNum))])]),t._v(" "),n("div",{staticClass:"coupon-date"},[n("div",{staticClass:"check-box"},[1==t.tabIndex&&"ConfirmCoupon"==t.$route.name?n("input",{staticClass:"checkbox",attrs:{type:"checkbox",name:"",id:"",value:""}}):t._e(),t._v(" "),3!=t.tabIndex?n("div",[t._v("剩"),n("em",[t._v(t._s(t.countDay(e.startTime,e.EndTime)))]),t._v(t._s(t.dateStr))]):t._e(),t._v(" "),3==t.tabIndex?n("div",[t._v("已过期")]):t._e()])]),t._v(" "),2==t.tabIndex?n("img",{staticClass:"used-icon",attrs:{src:a("FDXP")}}):t._e()])}))])])},staticRenderFns:[]},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"eidt_header"}},[n("div",{staticClass:"header-bar"},[n("img",{staticClass:"lt-arrow",attrs:{src:a("3Uj3")},on:{click:function(e){t.$router.go(-1)}}}),t._v(" "),n("span",{staticClass:"title"},[t._v(t._s(t.headerTitle))]),t._v(" "),t._t("edit")],2)])},staticRenderFns:[]},o=1,c={data:function(){return{headerTitle:"优惠券",tabIndex:1,isEmpty:!1,params:{pa:1,li:10,ob:1,ot:1,status:1},couponList:[{id:1,name:"优惠券名称，最多显示两行优惠券名称，最多显示两行",cardNum:"BA3489489G984GH",isvalid:1,status:1,totalAmount:100,startTime:"2018-1-10 00:00:00",EndTime:"2018-3-10 15:30:00"},{id:2,name:"优惠券名称，最多显示两行优惠券名称，最多显示两行",cardNum:"BA3489489G984GH",isvalid:1,status:1,totalAmount:100,startTime:"2018-1-10 00:00:00",EndTime:"2018-3-19 10:00:00"},{id:2,name:"优惠券名称，最多显示两行优惠券名称，最多显示两行",cardNum:"BA3489489G984GH",isvalid:1,status:1,totalAmount:100,startTime:"2018-1-10 00:00:00",EndTime:"2018-3-19 10:00:00"},{id:2,name:"优惠券名称，最多显示两行优惠券名称，最多显示两行",cardNum:"BA3489489G984GH",isvalid:1,status:1,totalAmount:100,startTime:"2018-1-10 00:00:00",EndTime:"2018-3-19 10:00:00"},{id:2,name:"优惠券名称，最多显示两行优惠券名称，最多显示两行",cardNum:"BA3489489G984GH",isvalid:1,status:1,totalAmount:100,startTime:"2018-1-10 00:00:00",EndTime:"2018-3-19 10:00:00"},{id:2,name:"优惠券名称，最多显示两行优惠券名称，最多显示两行",cardNum:"BA3489489G984GH",isvalid:1,status:1,totalAmount:100,startTime:"2018-1-10 00:00:00",EndTime:"2018-3-19 10:00:00"}]}},components:{Coupon:a("OF7X")(n,s,!1,function(t){a("POnu")},null,null).exports,EditHeader:a("OF7X")({props:["headerTitle"],methods:{}},i,!1,function(t){a("nEgI")},null,null).exports},created:function(){this.getCouponList(1)},watch:{$route:function(t,e){}},methods:{editClick:function(){this.$router.push({name:"AddCoupon"})},changeTab:function(t){this.tabIndex=t,this.getCouponList(t)},loadMore:function(){console.log("loadMore"),this.couponList.push({id:2,name:"优惠券名称，最多显示两行优惠券名称，最多显示两行",cardNum:"BA3489489G984GH",isvalid:1,status:1,totalAmount:100,startTime:"2018-1-10 00:00:00",EndTime:"2018-3-19 10:00:00"})},getCouponList:function(t){var e=this;this.$set(this.params,"status",t),this.$Api.getCouponList(this.params).then(function(t){console.log(t),0==t.q.s&&(0==t.q.total&&1==o?e.isEmpty=!0:(e.couponList=t.q.coupons,e.isEmpty=!1))})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"coupon-page"}},[a("edit-header",{attrs:{headerTitle:t.headerTitle}},[a("span",{staticClass:"edit",attrs:{slot:"edit"},on:{click:t.editClick},slot:"edit"},[t._v("添加优惠券")])]),t._v(" "),a("div",{staticClass:"coupon-tab"},[a("span",{class:{active:1==t.tabIndex},on:{click:function(e){t.changeTab(1)}}},[t._v("未使用")]),t._v(" "),a("span",{class:{active:2==t.tabIndex},on:{click:function(e){t.changeTab(2)}}},[t._v("已使用")]),t._v(" "),a("span",{class:{active:3==t.tabIndex},on:{click:function(e){t.changeTab(3)}}},[t._v("已过期")])]),t._v(" "),a("div",{staticClass:"coupon-wrap",class:{"coupon-wrap-type":"ConfirmCoupon"==t.$route.name}},[t.isEmpty?t._e():a("coupon",{attrs:{tabIndex:t.tabIndex,couponList:t.couponList},on:{loadMore:t.loadMore}}),t._v(" "),t.isEmpty?a("div",{staticStyle:{"text-align":"center"}},[t._v("暂无数据")]):t._e()],1),t._v(" "),"ConfirmCoupon"==t.$route.name?a("div",{staticClass:"coupon-btn"},[t._v("确定")]):t._e()],1)},staticRenderFns:[]},r=a("OF7X")(c,u,!1,function(t){a("rfQH")},null,null);e.default=r.exports},nEgI:function(t,e){},rfQH:function(t,e){}});
//# sourceMappingURL=2.a70bf3256dbdd078a46e.js.map